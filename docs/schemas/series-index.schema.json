{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://flowtime.dev/schemas/series-index.schema.json",
  "title": "FlowTime Series Index",
  "type":"object",
  "additionalProperties": false,
  "required":["schemaVersion","grid","series"],
  "properties": {
    "schemaVersion": {"type":"integer","const":1},
    "grid": {
      "type":"object",
      "required":["bins","binMinutes","timezone"],
      "properties": {
        "bins": {"type":"integer","minimum":1},
        "binMinutes": {"type":"integer","minimum":1},
        "timezone": {"type":"string"}
      },
      "additionalProperties": false
    },
    "series": {
      "type":"array",
      "items": {
        "type":"object",
        "required":["id","kind","path","unit","componentId","class","points","hash"],
        "properties": {
          "id": {"type":"string","pattern":"^[A-Za-z0-9._@-]+$"},
          "kind": {"type":"string","enum":["flow","state","derived"]},
          "path": {"type":"string"},
          "unit": {"type":"string"},
          "componentId": {"type":"string"},
          "class": {"type":"string"},
          "points": {"type":"integer","minimum":0},
          "hash": {"type":"string","pattern":"^sha256:[a-f0-9]{64}$"}
        },
        "additionalProperties": false
      }
    },
    "formats": {
      "type":"object",
      "properties": {
        "goldTable": {
          "type":"object",
          "properties": {
            "path": {"type":"string"},
            "dimensions": {"type":"array","items":{"type":"string"}},
            "measures": {"type":"array","items":{"type":"string"}}
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  }
}