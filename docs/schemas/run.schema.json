{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "run.schema.json",
  "type": "object",
  "required": ["schemaVersion","runId","engineVersion","grid","scenarioHash","createdUtc","source","warnings","series","events"],
  "properties": {
    "schemaVersion": {"type":"integer","const":1},
    "runId": {"type":"string"},
    "engineVersion": {"type":"string"},
    "grid": {
      "type":"object",
      "required":["bins","binMinutes","timezone","align"],
      "properties": {
        "bins": {"type":"integer","minimum":1},
        "binMinutes": {"type":"integer","minimum":1},
        "timezone": {"type":"string"},
        "align": {"type":"string","enum":["left"]}
      },
      "additionalProperties": false
    },
    "modelHash": {"type":"string","pattern":"^sha256:[0-9a-f]{64}$"},
    "scenarioHash": {"type":"string","pattern":"^sha256:[0-9a-f]{64}$"},
    "createdUtc": {"type":"string"},
    "source": {"type":"string","enum":["engine","sim"]},
    "warnings": {"type":"array","items":{"type":"string"}},
    "series": {
      "type":"array",
      "items": {
        "type":"object",
        "required":["id","path","unit"],
        "properties": {
          "id": {"type":"string"},
          "path": {"type":"string"},
          "unit": {"type":"string"}
        },
        "additionalProperties": false
      }
    },
    "events": {
      "type":"object",
      "required":["schemaVersion","fieldsReserved"],
      "properties": {
        "schemaVersion": {"type":"integer","minimum":0},
        "fieldsReserved": {"type":"array","items":{"type":"string"}}
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}