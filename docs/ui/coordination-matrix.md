| Milestone                                  | UI Deliverables (FlowTime.UI)                                                                                                                                                                      | Notes & Integration                                                                     |
| ------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| **M0 — Core Foundations**                  | Minimal chart (line plot) reading Engine/Sim CSV; demand vs served.                                                                                                                                | First validation: user sees deterministic output; no PMF support yet.                   |
| **M1 — Contracts Parity Pack**             | Switch to rendering **only from artifacts** (`run.json`, `series/index.json`, per-series CSV). Run metadata viewer.                                                                                | Locks in schema fidelity; ensures UI is schema-driven.                                  |
| **M1.5 — Focused Expressions**             | Inline editor for simple models (YAML text area with validation). Run button triggers Engine API. Visual confirm: SHIFT lag appears.                                                               | Helps validate Engine expr parser; no PMF UI yet.                                       |
| **M2 — PMF (EV only)**                     | **PMF Metadata Note**: outputs flagged as “PMF normalized.” Basic histogram visualization for PMFs. Expected value overlay in chart.                                                               | First visual touchpoint for PMFs. UI is a *consumer* only here.                         |
| **M3 — Backlog v1 + Latency**              | Series picker; backlog/latency chart overlays; conservation badge. Run metadata shows warnings (e.g., normalized PMFs).                                                                            | Foundation for visualizing downstream PMF impact (e.g., retries).                       |
| **M4 — Scenarios & Compare**               | Overlay editor: YAML time window + demand/capacity overrides. Side-by-side charts. KPI deltas. **PMFs can be attached inline** in overlay YAML (text only).                                        | Enables what-if scenarios with basic PMF references.                                    |
| **M5 — Routing / Fan-out / Capacity Caps** | Graph visualizer (elkjs layout, PixiJS rendering). Hover sparklines. Conservation across paths.                                                                                                    | Shows routing splits driven by Engine; still schema-driven.                             |
| **M6 — Batch Windows**                     | Shaded batch windows overlaid on time series.                                                                                                                                                      | PMFs not directly touched here, but delay kernels may reuse PMF-style histograms later. |
| **M6.5 — Cross-System Compatibility Pack** | Run metadata badge when Engine vs Sim parity passes (schema + golden vectors).                                                                                                                     | UI parity indicator ensures Sim outputs are consumable.                                 |
| **M7 — Backlog v2 (Buffers & Spill)**      | DLQ/spill overlays. DLQ area chart. Config UI to select buffer limits in scenario overlay.                                                                                                         | UI shows consequences of PMF-driven retries (later).                                    |
| **M8 — Multi-Class + Priority/Fairness**   | Class segmentation controls & legend. Switch series by flow. Class-colored overlays in graph.                                                                                                      | Prepares for multi-class PMFs (per-flow retry kernels).                                 |
| **M9 — Data Import & Fitting**             | **Telemetry Overlay Page**: overlay real telemetry vs model. Fit metrics view. **PMF Fitting Wizard (first cut):** empirical PMFs from telemetry (histogram preview).                              | First *authoring* tool for PMFs. Analysts can derive PMFs from telemetry.               |
| **M9.5 — Retry & Feedback Modeling**       | **PMF Editor (full module):** histogram editor with sliders, auto-normalization, stats (mean, variance, EV). Retry echo viz: visualize `CONV(errors, retry_kernel)` impact on downstream arrivals. | Now UI supports *designing* PMFs, not just visualizing them.                            |
| **M10 — Scenario Sweeps**                  | Sweep explorer: facets/brush. Sweep runs parameterized over PMFs (e.g., retry tail = light/medium/heavy). PMF variants selectable in sweeps.                                                       | Analysts can experiment with PMF families at scale.                                     |
| **M11 — Headless Runner + API Hardening**  | UI switches fully to API (no stubs). Sweep/scenario/PMF interactions routed through `/run`, `/state_window`.                                                                                       | Enables consistent API-driven PMF handling.                                             |
| **M12 — Template v2**                      | Template explorer. Form-based editor for models with embedded PMFs. Templates include daily/weekly arrival PMFs as first-class params.                                                             | PMFs can be packaged as reusable template components.                                   |
| **M13 — Backlog v3 (Priority Spill)**      | DLQ vs main queue split by class; spill indicators. Class filters.                                                                                                                                 | Retry kernels (PMFs) visualized per class; impact on DLQ shown.                         |
| **M14 — Calibration & Drift**              | **Drift Dashboard:** compare model vs telemetry. Learned retry/delay PMFs displayed as “suggested updates.” Analysts can accept/reject.                                                            | Closes loop: PMF editor integrates with calibration pipeline.                           |
| **M15 — Uncertainty Bands**                | Percentile bands (P50/P90) shaded on charts. Toggle Monte Carlo vs EV. PMF Editor allows “uncertainty mode” with multiple variants.                                                                | Visualizes uncertainty stemming from PMFs.                                              |
| **M16 — WASM Engine (Future)**             | Run mode toggle (Server vs Browser). PMF editing/visualization works identically in browser mode.                                                                                                  | Parity tests ensure WASM handles PMFs the same.                                         |
