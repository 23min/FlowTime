# Milestone M1

> **ðŸ“‹ Charter Notice**: This milestone predates the [FlowTime-Engine Charter](../flowtime-engine-charter.md). Expression capabilities remain core to the charter execution engine. See [Charter Roadmap](CHARTER-ROADMAP.md) for current development milestones (M2.7-M2.9).

## Scenarios

- Spreadsheetâ€‘style formulas and references: define new series from other series with arithmetic and simple builtâ€‘ins.
- Examples:
  - served = demand * 0.8 + SHIFT(demand, 1)
  - cost = volume * unitCost; total = a + b
  - Lead/lag simple transforms for sanity checks and projections.

## How the code works

- Expression parser turns `expr:` strings into an AST.
- The AST compiles to the same node graph used in M0:
  - Binary operations (+, -, *, /) map to BinaryOpNode.
  - SHIFT(series, k) maps to a ShiftNode (new in M1).
  - Identifiers resolve to existing node outputs.
- The graph validates, orders topologically, and evaluates deterministically on the canonical grid.

## Why itâ€™s useful now

- Author models in a familiar spreadsheet idiom.
- Encode time relationships (lead/lag) without handâ€‘building intermediate nodes.
- Sets the stage for richer builtâ€‘ins (CLAMP/MIN/MAX) and, later, queue/backlog logic.
