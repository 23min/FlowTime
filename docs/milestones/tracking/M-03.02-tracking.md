# M-03.02 Implementation Tracking

**Milestone:** M-03.02 — TelemetryLoader + Templates  
**Started:** 2025-02-14  
**Status:** ✅ Complete  
**Branch:** `time-travel-m3`  
**Assignee:** Codex (AI)

---

## Quick Links

- **Milestone Document:** [`docs/milestones/M-03.02.md`](../M-03.02.md)
- **Roadmap Context:** [`docs/architecture/time-travel/time-travel-planning-roadmap.md`](../../architecture/time-travel/time-travel-planning-roadmap.md)
- **Canonical Artifacts:** [`docs/releases/M-03.01.md`](../../releases/M-03.01.md)
- **Template Guide:** [`docs/templates/README.md`](../../templates/README.md)
- **Telemetry Capture Guide:** [`docs/operations/telemetry-capture-guide.md`](../../operations/telemetry-capture-guide.md)

---

## Current Status

### Overall Progress
- [x] Phase 1: Telemetry Capture Foundations
- [x] Phase 2: Sim Template Integration
- [x] Phase 3: End-to-End Validation & Docs

### Test Status
- **Unit Tests:** ✅ New coverage in Generator & Core (telemetry semantics, URI resolver)
- **Integration Tests:** ✅ `TelemetryWorkflowEndToEnd` exercises capture → Sim → `/state`
- **Golden Tests:** Pending

---

## Progress Log

### Progress Log

#### 2025-02-14 — Telemetry bundle orchestration wired
- ✅ Normalised telemetry semantics so template-generated models point at `file://telemetry/<csv>` URIs inside canonical runs.
- ✅ Added `TelemetryWorkflowEndToEndTests` covering capture → Sim → bundle → `StateQueryService`.
- ✅ Extended URI resolver + tests to honour `file://telemetry/...` mappings.
- ✅ Updated telemetry capture guide with bundling workflow.
- ✅ Added provenance alignment assertions to `TelemetryBundleBuilderTests` to ensure manifest + metadata stay linked.
- ✅ Implemented gap detection/fill warnings (`data_gap`) in capture CLI with docs and unit coverage.
- ✅ Published JSON template schema and refreshed template README with parameter guidance.
- ✅ Added `TelemetryCaptureGoldenTests` to lock capture outputs for order-system, microservices, and http-service fixtures.
- ✅ Exposed TelemetryBundleBuilder via CLI command to remove inline C# usage.
- ✅ Documented telemetry observability signals (CLI, manifest, `/state`) in the capture guide.
- ✅ Added `TelemetryStateGoldenTests` ensuring `/state` and `/state_window` surface telemetry provenance and warnings.
- ✅ Added template schema validation tests to ensure parameter metadata stays in sync with FlowTime-Sim schema.
- ✅ Captured telemetry bundles and `/state` fixtures for regression.

---

## Phase 1: Telemetry Capture Foundations

**Goal:** Build the capture pipeline that converts deterministic run outputs into telemetry-mode bundles.

**Tasks & Checklist:**
- [x] Implement `flowtime telemetry capture` CLI with dry-run support.
- [x] Add gap/warning injection (zero-fill, NaN, partial data) with structured codes.
- [x] Generate `manifest.json` from captured bundles with provenance and checksum validation.
- [x] Record golden capture bundles for order-system, microservices, http-service runs.
- [x] Document capture workflow and gap configuration in `docs/operations/telemetry-capture-guide.md`.
- [x] Note future migration path where capture becomes a regression aid once live telemetry loaders (ADX/catalog) are available.

---

## Phase 2: Sim Template Integration

**Goal:** Orchestrate FlowTime-Sim template generation using captured telemetry bundles while keeping ownership in Sim.

**Tasks & Checklist:**
- [x] Create scripts/CLI helpers that call Sim `/templates/{id}/generate` (or CLI) with parameter payloads referencing captured bundles.
- [x] Validate template parameter mappings (scalar primitives and arrays) against Sim schema.
- [x] Pipe Sim-generated models through `RunArtifactWriter` to emit canonical bundles.
- [x] Update `docs/templates/README.md` with parameter mapping tables and Sim integration guidance.
- [x] Add provenance alignment tests ensuring template + capture metadata match across artifacts.

---

## Phase 3: End-to-End Validation & Docs

**Goal:** Validate the capture → Sim → `/state` workflow and capture operator runbooks.

**Tasks & Checklist:**
- [x] Implement integration tests covering capture → Sim → `RunArtifactWriter` → `StateQueryService`.
- [x] Capture golden `/state` and `/state_window` responses using captured telemetry bundles.
- [x] Add structured log assertions for capture pipeline + `/state` execution path.
- [x] Publish workflow + troubleshooting guide, including UI orchestration notes.
- [x] Record observability and warning interpretation guidance in milestone and tracking docs.
