# FlowTime Time-Travel Status ‚Äî 2025-11-23

## Executive Snapshot
- Core Time-Travel APIs, telemetry capture/bundle pipeline, and CLI orchestration remain in production use (no regressions since the 2025-10-16 audit).
- All canonical templates now include backlog-aware queues and explicit DLQ/terminal sinks on ‚Äúour‚Äù services, matching TT‚ÄëM‚Äë03.32.1 goals.
- Analyzer/Sim validation swept the template catalog; full solution tests pass (aside from documented performance/Sim skips).
- Template catalog endpoints live on FlowTime.Sim (`/api/v1/templates` family) and are what the UI consumes today; Engine clients simply need compiled models/runs. Remaining gaps center on the Engine ecosystem (topology layout hints, TelemetryLoader service, analyzer cross-node checks) plus long-range items from the whitepaper (advanced expressions, routers/autoscale nodes, per-class modeling).

## Highlights Since 2025-10-16
1. **Template retrofits complete**: IT microservices, manufacturing line, network reliability, incident workflow, transportation, and supply-chain templates now drive DLQs only from operator-owned services and model backlog carry/attrition realistically. Release notes and milestone docs updated; FlowTime.Sim + TemplateBundle tests cover the new behavior.
2. **DLQ lens documented**: Milestone doc explicitly documents the ‚Äúour services vs. dependencies‚Äù rule, and the release notes point to the template changes. Deferred analyzer enhancements (queue-arrivals vs upstream served) are tracked for the next epic.
3. **Build/test hygiene**: `dotnet build` + `dotnet test FlowTime.sln` pass end-to-end; the previous API test timeouts are resolved after the Processor rename fix.
4. **Template catalog via Sim API**: FlowTime.Sim Service exposes `/api/v1/templates`, `/templates/{id}`, and `/templates/{id}/generate`, which the UI calls today. FlowTime.API intentionally remains model-centric, so no additional template endpoint is planned unless we decide to proxy Sim.

## Whitepaper Alignment Snapshot
- ‚úÖ Core DAG + backlog primitives, retry kernels, DLQ semantics, and `/state`/`/state_window` endpoints match the whitepaper‚Äôs Chapters 2‚Äì4.
- ‚ö†Ô∏è Pending items: advanced expression functions (ABS/SQRT/POW, EMA/DELAY already documented in retry modeling), router/autoscale node types, per-class modeling/PMF sampling, TelemetryLoader service, template discovery baked into Engine API.
- üìì Compared to the 2025-10-07 engine audit, the critical gaps around backlog nodes and `/state` endpoints are closed. Remaining audit items (expression coverage, router/autoscale nodes, conservation validation beyond queues) are captured in the table below.
- üìö See `docs/architecture/expression-extensions-roadmap.md` for the exploratory motivation/risks behind the advanced expression operators referenced here.

## Outstanding Gaps / Deferred Items
| Gap | Description | Notes |
| --- | --- | --- |
| Topology layout hints | Templates still omit `topology.ui` hints; UI uses heuristics. | Provide deterministic layout rules or embed positions in templates to stabilize graphs. |
| TelemetryLoader component | Architecture docs (Ch.3‚ÄìCh.5, planning roadmap) assume a dedicated TelemetryLoader service (ADX/KQL ingest). Implementation deferred; current tooling relies on CLI capture/bundles. | Should be re-scoped into a future milestone; no runtime loader exists yet. |
| Analyzer cross-node checks | Analyzer doesn‚Äôt cross-check queue arrivals vs upstream `served`. This allowed mistakes like `queue_demand` semantics. | Deferred to next epic‚Äîrequires topology-aware validation or edge-level telemetry. |
| Run retention & bundle promotion helpers | TT‚ÄëM‚Äë03.17 deferred decisions on retention policy for generated bundles and CLI helpers to promote local bundles to shared libraries. | Still parked; capture requirements post-epic. |
| Retry edge overlays & queue latency fallback | TT‚ÄëM‚Äë03.27 documented deferred work for retry/service-time overlays, oldest_age metrics, edge overlays, and queue-depth fallback fetchers. | Remains in roadmap ‚ÄúDeferred‚Äù section; revisit when edge telemetry/heatmaps are scheduled. |
| Advanced expression library | Audit + whitepaper note missing functions (ABS/SQRT/POW, EMA, DELAY, conditional expressions; see retry-modeling.md ¬ß2). Current engine only supports SHIFT/CONV/MIN/MAX/CLAMP. | Low-to-medium priority; needed for richer models and aligns with whitepaper ¬ß3. |
| Router / autoscale node types | Whitepaper ¬ß2.2 + audit highlight router/autoscale primitives; we still rely on manual expressions (no RouterNode/AutoscaleNode). | Future node work once edge metrics or autoscale roadmap is prioritized. |
| PMF sampling & classes | Whitepaper ¬ß2.3 describes per-class modeling and PMF sampling; current PMF nodes output expected value only and there‚Äôs no class scheduler. | Capture in future epic if per-class flows become a requirement.

## Action Items (Carryover)
1. Document or emit topology layout metadata to stabilize graph rendering.
2. Plan the TelemetryLoader backlog item (or update the architecture docs to reflect the CLI-based pipeline).
3. Design analyzer enhancements for queue-arrival cross-checks once the above items are scheduled.

*(Compiled November 23, 2025 ‚Äî supersedes `status-2025-10-16.md` for the latest state.)*
