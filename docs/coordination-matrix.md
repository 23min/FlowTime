| Milestone                                           | Engine (FlowTime)                                                                                                                                             | Sim (FlowTime-Sim)                                                                                            | UI (FlowTime.UI)                                          | Acceptance (shared)                                                              |
| --------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | -------------------------------------------------------------------------------- |
| **M0 ‚Äî Core Foundations**                           | Grid, `Series<T>`, DAG eval; const + binary ops; CLI `run`; API: `/run`, `/graph`, `/healthz`.                                                                | ‚Äî                                                                                                             | Minimal chart reading API/CSV.                            | Deterministic eval, cycle detection; chart shows demand/served.                  |
| **M1 ‚Äî Contracts Parity Pack**                      | Dual-write artifacts: `run.json`, `manifest.json`, `series/index.json`, per-series CSV; JSON-Schema validation; deterministic hashing.                        | SIM-M2: produce **same** artifact shapes (schemaVersion 1).                                                   | Renders exclusively from artifacts (no bespoke payloads). | CI schema validation; CLI vs API parity; Sim pack consumable by Engine adapters. |
# Charter Coordination Matrix

> **üìã Legacy Notice**: This matrix has been superseded by the [FlowTime-Engine Charter](flowtime-engine-charter.md) and [Charter Roadmap](CHARTER-ROADMAP.md). The information below represents the legacy M0-M16 sequence that is being replaced with the charter-driven milestone sequence.

## Current Charter Milestones (Post-M2.6)

| Milestone                                  | Engine (FlowTime-Engine)                                                                              | Sim (FlowTime-Sim)                                                                | UI (FlowTime.UI)                                      | Acceptance Criteria                                                          |
| ------------------------------------------ | ----------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------- | ---------------------------------------------------- | --------------------------------------------------------------------------- |
| **M2.7 ‚Äî KISS File-Based Registry**       | Directory structure for artifacts; `index.json` with run metadata; discovery CLI commands          | Utilize same registry structure for sim artifacts; produce compatible metadata   | Browse/filter runs by metadata; basic search        | Registry enables artifact discovery; metadata schema consistent across tools |
| **M2.8 ‚Äî Incremental Charter UI**         | Enhanced artifact endpoints; metadata enrichment; export API endpoints                               | ‚Äî                                                                                | Charter workflow: Models‚ÜíRuns‚ÜíArtifacts‚ÜíLearn       | UI follows charter paradigm; incremental adoption without breaking changes   |
| **M2.9 ‚Äî Contextual Compare**             | Cross-run comparison within artifact collections; metadata-driven grouping; delta computations      | Provide comparison datasets; ensure deterministic output for cross-validation    | Compare interface integrated with registry browser   | Contextual comparisons leverage registry metadata; results reproducible      |
| **SIM-M3.0 ‚Äî Charter Alignment**          | ‚Äî                                                                                                    | Align with Engine charter; adopt artifacts-centric workflow; registry adoption  | ‚Äî                                                   | Sim workflow matches Engine charter paradigm; consistent artifact handling   |

## Legacy Milestones (M0-M16 Sequence)

> **‚ö†Ô∏è Deprecated**: The following represents the original milestone sequence that has been superseded by the charter. These milestones are preserved for historical reference but development follows the charter roadmap above.

| Milestone                                           | Engine (FlowTime)                                                                                                                                             | Sim (FlowTime-Sim)                                                                                            | UI (FlowTime.UI)                                          | Acceptance (shared)                                                              |
| --------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | -------------------------------------------------------------------------------- |
| **M0 ‚Äî Core Foundations** ‚úÖ **COMPLETED**          | Grid, `Series<T>`, DAG eval; const + binary ops; CLI `run`; API: `/run`, `/graph`, `/healthz`.                                                                | ‚Äî                                                                                                             | Minimal chart reading API/CSV.                            | Deterministic eval, cycle detection; chart shows demand/served.                  |
| **M1 ‚Äî Contracts Parity Pack** ‚úÖ **COMPLETED**     | Dual-write artifacts: `run.json`, `manifest.json`, `series/index.json`, per-series CSV; JSON-Schema validation; deterministic hashing.                        | SIM-M2: produce **same** artifact shapes (schemaVersion 1).                                                   | Renders exclusively from artifacts (no bespoke payloads). | CI schema validation; CLI vs API parity; Sim pack consumable by Engine adapters. |
| **M1.5 ‚Äî Focused Expressions** ‚úÖ **COMPLETED**     | Expr parser (`+ - * / MIN MAX CLAMP`) + `SHIFT(series,k)`; ref resolution.                                                                                    | ‚Äî (Sim is not an expr evaluator).                                                                             | Example models; verify SHIFT lag visually.                | SHIFT unit tests; no algebraic loops.                                            |
| **M2.6 ‚Äî Export System** ‚úÖ **COMPLETED**           | Export endpoints; CSV/JSON artifact generation; deterministic naming                                                                                          | ‚Äî                                                                                                             | Export UI integration                                     | Exports produce structured artifacts ready for registry organization              |

*[Additional legacy milestones M2-M16 preserved for reference...]*
| **M2 ‚Äî PMF (EV only)** *(optional early)*           | `pmf` node ‚Üí expected value series; normalization.                                                                                                            | (Opt) generator matching EV for demo parity.                                                                  | Metadata note: ‚ÄúPMF normalized.‚Äù                          | PMF probs sum‚âà1; expected values match CSV.                                      |
| **M3 ‚Äî Backlog v1 + Latency + Artifact Endpoints**  | `backlog[t]=max(0, b[t-1]+inflow[t]-served[t])`; `latency[t]=served? b[t]/served*binMinutes : 0`; expose `/runs/{id}/index` & `/runs/{id}/series/{seriesId}`. | SIM-M3: basic generators for `arrivals, served, capacity`; derive `backlog` identically; deterministic seeds. | Run metadata viewer, series picker, conservation badge.   | Conservation holds; div-by-zero safe; artifact endpoints stream correctly.       |
| **M4 ‚Äî Scenarios & Compare**                        | Overlay YAML (time-windowed demand/capacity); `compare` CLI; emit `delta.csv`, `kpi.csv`.                                                                     | SIM-M4: baseline + overlays with same semantics.                                                              | Overlay editor; side-by-side charts; KPI deltas.          | Overlay invariants; Engine‚ÜîSim compare reproducible.                             |
| **M5 ‚Äî Routing / Fan-out / Capacity Caps**          | `RouterNode`, `FanOutNode`, `CapacityNode` (+ overflow).                                                                                                      | SIM-M5: multi-path synthetic data (`arrivals/served/overflow`) to exercise routing.                           | Graph visualizer; hover sparklines.                       | Splits sum to 1; overflow computed; path conservation verified.                  |
| **M6 ‚Äî Batch Windows**                              | `BatchGateNode` (open/close; release on open).                                                                                                                | SIM-M6.pre: periodic closures & releases.                                                                     | Shaded batch window overlays.                             | Visible batch spikes; gate schedule aligns to bins.                              |
| **M6.5 ‚Äî Cross-System Compatibility Pack**          | Shared golden vectors, RNG (PCG32) determinism, grid alignment tests.                                                                                         | Same; produce/consume each other‚Äôs packs in CI.                                                               | Badge in run metadata when cross-validation passes.       | Both sides pass integration suite without code changes.                          |
| **M7 ‚Äî Backlog v2 (Buffers & Spill)**               | Finite buffers; spill to DLQ (no retries yet); configurable draining.                                                                                         | SIM-M7: emit controlled DLQ/spill patterns.                                                                   | DLQ/spill indicators & area overlays.                     | Conservation with spill; buffer limits enforced.                                 |
| **M8 ‚Äî Multi-Class + Priority/Fairness**            | Class-aware series IDs; weighted-fair & strict priority sharing.                                                                                              | SIM-M8: per-class generators; mirrored policies.                                                              | Class segmentation controls & legend.                     | Per-class + aggregate conservation; policy conformance under binding capacity.   |
| **M9 ‚Äî Data Import & Fitting**                      | CSV adapter for Gold schema; resampling; capacity smoothing; basic fitting helpers.                                                                           | SIM-M9: telemetry-like corpora for eval.                                                                      | Telemetry overlay & fit metrics.                          | Bins align post-resample; fitting improves objective on test set.                |
| **M9.5 ‚Äî Retry & Feedback Modeling** **(deferred)** | `CONV`, `DELAY`, `RETRY`, `EMA`; conservation validator; single-pass (no algebraic loops).                                                                    | **SIM-M6**: retry kernel/echo generators; conservation datasets.                                              | Retry echo viz; conservation diagnostics.                 | Retry volumes match kernels; conservation holds with retries & DLQ.              |
| **M10 ‚Äî Scenario Sweeps**                           | Param sweep runner; `sweep.csv`, `sweep.html`.                                                                                                                | Sweepable parameters exposed.                                                                                 | Sweep explorer with facets/brush.                         | Reproducible grid; stable KPIs across runs.                                      |
| **M11 ‚Äî Headless Runner + API Hardening**           | Endpoints for run/compare/sweep; `/state_window` partial extracts.                                                                                            | ‚Äî                                                                                                             | UI switches to API e2e (no stubs).                        | e2e smoke suite green; windowed extracts bounded and correct.                    |
| **M12 ‚Äî Template v2**                               | Template expansion; typed params & validation.                                                                                                                | Provide template packs for demos.                                                                             | Template explorer & generated forms.                      | Idempotent expansion; clear validation errors in UI.                             |
| **M13 ‚Äî Backlog v3 (Priority Spill & Class Depth)** | Richer spill semantics (priority spill, per-class buffers).                                                                                                   | Datasets with controlled priority spill.                                                                      | DLQ vs main queue visuals; class filters.                 | Class-aware spill invariants pass.                                               |
| **M14 ‚Äî Calibration & Drift**                       | Learn routing & retry kernels from telemetry; drift reports w/ CIs.                                                                                           | Labeled ‚Äútruth‚Äù datasets for eval.                                                                            | Drift dashboard.                                          | Calibration reduces error; drift alerts on synthetic regressions.                |
| **M15 ‚Äî Uncertainty Bands**                         | Monte Carlo; percentile bands (P50/P90) in artifacts.                                                                                                         | Seeded stochastic variants.                                                                                   | Shaded percentile bands; toggles.                         | Deterministic with fixed seeds; percentile math correct.                         |
| **M16 ‚Äî WASM Engine (Future)**                      | WASM binding with parity tests; browser mode toggle.                                                                                                          | ‚Äî                                                                                                             | Run mode switch (Server/WASM).                            | Byte-level parity on golden vectors.                                             |
