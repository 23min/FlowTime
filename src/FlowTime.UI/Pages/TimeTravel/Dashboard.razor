@page "/time-travel/dashboard"
@using MudBlazor
@using Microsoft.AspNetCore.Components
@inject NavigationManager Navigation

<PageTitle>Time-Travel Dashboard</PageTitle>

<MudPaper Class="pa-6" Elevation="2">
    <MudText Typo="Typo.h4" GutterBottom="true">Time-Travel Dashboard</MudText>

    @if (!string.IsNullOrWhiteSpace(_errorMessage))
    {
        <MudAlert Severity="Severity.Warning" Variant="Variant.Outlined" Class="mb-4">
            <MudText Typo="Typo.body1">@_errorMessage</MudText>
            <MudButton Variant="Variant.Text"
                       Color="Color.Primary"
                       StartIcon="@Icons.Material.Filled.ArrowBack"
                       OnClick="NavigateBack">
                Back to Artifacts
            </MudButton>
        </MudAlert>
    }
    else
    {
        <MudText Typo="Typo.body1" Color="Color.Secondary">
            Run <MudText Typo="Typo.subtitle2" Inline="true">@RunId</MudText> will populate dashboard visuals in upcoming milestones.
        </MudText>
    }
</MudPaper>

@code {
    [Parameter, SupplyParameterFromQuery(Name = "runId")]
    public string? RunId { get; set; }

    private string? _errorMessage;

    protected override void OnParametersSet()
    {
        _errorMessage = string.IsNullOrWhiteSpace(RunId)
            ? "No run selected. Choose a run from the Artifacts page to explore dashboard metrics."
            : null;
    }

    private void NavigateBack() => Navigation.NavigateTo("/artifacts");
}
