@inject FlowTime.UI.Services.ThemeService Theme
@inject IJSRuntime JS

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if(!firstRender) return;
        try
        {
            await Theme.EnsureLoadedAsync();
            var mode = await JS.InvokeAsync<string>("ftTheme.get");
            await Theme.SetAsync(mode == "dark");
        }
        catch { }
    }
}
