{
  "name": "FlowTime Dev",
  "image": "mcr.microsoft.com/devcontainers/dotnet:1-9.0",
  "workspaceFolder": "/workspaces/flowtime-vnext",
  "workspaceMount": "source=${localWorkspaceFolder}/..,target=/workspaces,type=bind,consistency=cached",
  // Optional: also expose the sibling at a second path (not required since parent is mounted)
  "mounts": [
    "source=${localWorkspaceFolder}/../flowtime-sim-vnext,target=/opt/flowtime-sim-vnext,type=bind,consistency=cached,ro"
  ],
  "features": {
    "ghcr.io/devcontainers/features/powershell:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/node:1": {
      "version": "20"
    }
  },
  "updateContentCommand": "pwsh .devcontainer/init.ps1",
  "postCreateCommand": "pwsh .devcontainer/init.ps1 --PostCreate",
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.defaultProfile.linux": "pwsh",
        "github.useLocalServer": false,
        "dotnet.server.useOmnisharp": false,
        "editor.formatOnSave": true,
        "yaml.validate": true,
        "yaml.format.enable": true,
        "yaml.schemas": {
          "https://json.schemastore.org/github-workflow.json": ".github/workflows/*.yml",
          "https://json.schemastore.org/github-action.json": ".github/actions/**/action.yml"
        }
      },
      "extensions": [
        "ms-dotnettools.csdevkit",
        "ms-dotnettools.csharp",
        "EditorConfig.EditorConfig",
        "eamodio.gitlens",
        "github.vscode-github-actions",
        "mhutchie.git-graph",
        "redhat.vscode-yaml",
        "GitHub.copilot",
        "github.copilot-chat",
        "humao.rest-client",
        "shd101wyy.markdown-preview-enhanced"
      ]
    }
  },
  "remoteUser": "vscode",
  "runArgs": [
    "--cap-add=SYS_PTRACE",
    "--security-opt",
    "seccomp=unconfined",
    "--sysctl",
    "net.ipv6.conf.all.disable_ipv6=1",
    "--sysctl",
    "net.ipv6.conf.default.disable_ipv6=1",
    "--network=flowtime-dev",
    "--name",
    "flowtime-api"
  ],
  "forwardPorts": [
    8080
  ],
  "remoteEnv": {
    "NODE_OPTIONS": "--dns-result-order=ipv4first"
  }
}